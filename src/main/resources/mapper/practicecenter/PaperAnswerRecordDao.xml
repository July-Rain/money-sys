<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lawschool.dao.practicecenter.PaperAnswerRecordDao">

    <insert id="saveForm" parameterType="com.lawschool.form.ThemeAnswerForm">
        INSERT INTO LAW_PAPER_RECORD
        (
            id,
            TASK_ID,
            QUESTION_ID,
            ANSWER,
            RIGHT,
            CREATE_TIME,
            CREATE_USER,
            THEME_NAME
        )
        VALUES
        (
            #{id},
            #{taskId},
            #{qId},
            #{answer},
            #{right},
            #{createTime},
            #{createUser},
            #{themeName}
        )
    </insert>

    <select id="analysisAnswer" resultType="com.lawschool.form.ThemeAnswerForm">
        SELECT
            theme_name AS "themeName",
            right AS "right",
            count(*) AS "rightNum"
        FROM law_paper_record
        <where>
            task_id = #{id}
        </where>
        GROUP BY theme_name, right
        ORDER BY theme_name
    </select>
</mapper>